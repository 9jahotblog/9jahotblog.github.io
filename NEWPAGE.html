<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>VAST Ad Example</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        #videoContainer {
            width: 640px;
            margin: 50px auto;
            background-color: #000;
            position: relative;
        }

        video {
            width: 100%;
            height: auto;
        }

        #adContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
        }
    </style>
</head>
<body>

    <div id="videoContainer">
        <!-- The ad container (where the ad will play) -->
        <div id="adContainer"></div>

        <!-- Your content video -->
        <video id="contentVideo" controls>
            <source src="your-video.mp4" type="video/mp4">
            Your browser does not support HTML5 video.
        </video>
    </div>

    <!-- Google IMA SDK -->
    <script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>

    <script>
        var adDisplayContainer, adsLoader, adsManager, videoContent;

        function init() {
            videoContent = document.getElementById('contentVideo');

            // Create the ad display container
            adDisplayContainer = new google.ima.AdDisplayContainer(document.getElementById('adContainer'), videoContent);

            // Initialize the ad display container (required for mobile devices)
            adDisplayContainer.initialize();

            // Create the AdsLoader and listen for when the ads are loaded
            adsLoader = new google.ima.AdsLoader(adDisplayContainer);
            adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, onAdsManagerLoaded, false);
            adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError, false);

            // Request video ads
            var adsRequest = new google.ima.AdsRequest();
            adsRequest.adTagUrl = 'https://unrealistic-reaction.com/dfmmFzzEd.G/NqvfZpGvUG/FeTmJ9XudZiUelJk/PBTCUg1wNMDng/2vOfDtIRtPN/TZUg0hOqDqYA4gMLyAZBsVazW/1rpAdbDH0bxq'; // Replace with your VAST tag URL

            // Specify the linear and nonlinear slot sizes. This helps the SDK to select the correct creative if multiple are available.
            adsRequest.linearAdSlotWidth = 640;
            adsRequest.linearAdSlotHeight = 360;

            adsRequest.nonLinearAdSlotWidth = 640;
            adsRequest.nonLinearAdSlotHeight = 150;

            adsLoader.requestAds(adsRequest);
        }

        // When ads are loaded successfully
        function onAdsManagerLoaded(adsManagerLoadedEvent) {
            // Get the ads manager
            adsManager = adsManagerLoadedEvent.getAdsManager(videoContent);

            // Add listeners to the ads manager to detect when ads start and complete
            adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError);
            adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, onContentPauseRequested);
            adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, onContentResumeRequested);

            try {
                // Initialize the ads manager
                adsManager.init(640, 360, google.ima.ViewMode.NORMAL);
                // Start playing the ad
                adsManager.start();
            } catch (adError) {
                // If there's an issue with the ad, resume the content
                console.log('Ad error: ', adError);
                videoContent.play();
            }
        }

        // Handle ad errors
        function onAdError(adErrorEvent) {
            console.log('Ad error: ', adErrorEvent.getError());
            if (adsManager) {
                adsManager.destroy();
            }
            // Play the content video if the ad fails
            videoContent.play();
        }

        // Pause the content when an ad is requested
        function onContentPauseRequested() {
            videoContent.pause();
        }

        // Resume content when the ad is done
        function onContentResumeRequested() {
            videoContent.play();
        }

        // Initialize everything when the window loads
        window.onload = function () {
            init();
        };
    </script>
</body>
</html>
